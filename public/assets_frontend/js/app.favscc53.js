app.favs={list:{},order:[],init:function(){try{var a=localStorage.getItem("favs-data"),s=localStorage.getItem("favs-order");app.favs.list=a?JSON.parse(a):{},app.favs.order=s?s.split(","):[]}catch(a){}},toggle:function(a){if(a){this.list[a]?(delete this.list[a],$("#movie-"+a+" .fav-btn").removeClass("infavs"),$("#slider_movie.movie_"+a+" .fav-btn").removeClass("infavs"),$("#slider_tvshow.tvshow_"+a+" .fav-btn").removeClass("infavs"),$("#slider_movie.movie_"+a+" .js-add-favorite").removeClass("infavs"),$("#slider_tvshow.tvshow_"+a+" .js-add-favorite").removeClass("infavs")):(this.list[a]=ui.home.catalog.items[a],this.list[a].infavs="infavs",this.list[a].section=$("#movie-"+a).data("section"),this.order.push(a),$("#movie-"+a+" .fav-btn").addClass("infavs"),$("#slider_movie.movie_"+a+" .fav-btn").addClass("infavs"),$("#slider_tvshow.tvshow_"+a+" .fav-btn").addClass("infavs"),$("#slider_movie.movie_"+a+" .js-add-favorite").addClass("infavs"),$("#slider_tvshow.tvshow_"+a+" .js-add-favorite").addClass("infavs"));try{localStorage.setItem("favs-data",JSON.stringify(app.favs.list)),localStorage.setItem("favs-order",app.favs.order.join(","))}catch(a){}}},show:function(){$("#header .activated").removeClass("activated"),$("#menu_panel .favs").addClass("activated"),ui.sliders.close_all(),ui.home.catalog.clear(),ui.home.catalog.section="favs";var e=0;this.order.forEach(function(a,s){a&&app.favs.list[a]&&!document.getElementById("movie-"+a)&&(ui.home.catalog.items[a]||(ui.home.catalog.items[a]=app.favs.list[a]),ui.home.catalog.appendItem(app.favs.list[a],app.favs.list[a].section,s),e++)}),ui.home.catalog.scroller.refresh(),e?$("#catalog_scroller").sortable({disabled:!0,tolerance:"pointer",containment:"parent",scroll:!1,update:function(){app.favs.order=[],$("#movies_catalog .movie").each(function(){var a=$(this).data("movie_id");a&&app.favs.order.push(a)})}}):$("#catalog_scroller").html('<div class="noResults">No bookmarks found...</div>'),app.history.show()}};