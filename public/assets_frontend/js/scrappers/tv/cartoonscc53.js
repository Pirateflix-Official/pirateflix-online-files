fetcher.scrappers.cartoons_tv=function(e,t,p,s,o){a="top_rated"===app.config.fetcher.sortBy?app.config.api_keys.tmdb_url+"tv/top_rated?api_key="+app.config.api_keys.tmdb:"now_playing"===app.config.fetcher.sortBy?app.config.api_keys.tmdb_url+"tv/on_the_air?api_key="+app.config.api_keys.tmdb:app.config.api_keys.tmdb_url+"tv/popular?api_key="+app.config.api_keys.tmdb,"all"===e?e=!1:"action"===e||"adventure"===e?e="10759":"animation"===e?e="16":"comedy"===e?e="35":"crime"===e?e="80":"documentary"===e?e="99":"drama"===e?e="18":"family"===e?e="10751":"fantasy"===e?e="10765":"history"===e?e="10768":"horror"===e?e="80":"mystery"===e?e="9648":"romance"===e?e="10766":"sci-fi"===e?e="10765":"music"===e?e="10764":"war"===e?e="10768":"western"===e?e="37":"kids"===e?e="10762":"reality"===e?e="10764":"thriller"===e?e="9648":"biography"===e&&(e="99");var a=a+"&include_adult=false&with_keywords=6513&page="+ui.home.catalog.page;t&&(a=app.config.api_keys.tmdb_url+"search/tv?api_key="+app.config.api_keys.tmdb+"&query="+t+"&page="+ui.home.catalog.page+"&include_adult=false&with_keywords=6513"),e&&(a+="&with_genres="+e),p&&p.toString().match(/\d+/)&&(a+="&page="+p),$.ajax({url:a,dataType:"json",timeout:9e3,error:function(){o?s(!1):fetcher.scrappers.cartoons_tv(e,t,p,s,!1)},success:function(a){var r=[],i={};a.error||void 0===a.results||0==a.results.length?o?s(!1):fetcher.scrappers.cartoons_tv(e,t,p,s,!1):(a.results.forEach(function(a){var e,t;"null"===a.poster_path||null===a.poster_path||""===a.poster_path||(e={id:a.id,imdb:a.id,title:a.name,year:a.first_air_date?a.first_air_date.substring(0,4):"&nbsp;",runtime:"",synopsis:"",imdb_rating:parseFloat(a.vote_average),poster_small:app.config.api_keys.tmdb_src+"w185"+a.poster_path,poster_big:app.config.api_keys.tmdb_src+"w500"+a.poster_path,stars:utils.movie.rateToStars(parseFloat(a.vote_average))},void 0===(t=i[a.id])&&(t=i[a.id]=e),-1===r.indexOf(t)&&r.push(t))}),s(r))}})};